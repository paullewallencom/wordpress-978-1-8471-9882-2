var xmlLoader:URLLoader = new URLLoader();xmlLoader.load(new URLRequest("gallery1.xml"));var xml:XML;var loader:Loader;var pics:String;var H:String;var W:String;var picNum:Number=0;var timer:Timer=new Timer(100);var total:Number;function processXML(event:Event):void{	timer.start();	timer.addEventListener(TimerEvent.TIMER, timerListener);	timer.addEventListener(TimerEvent.TIMER, timerListener2);	xml=new XML(event.target.data);}function loadPics():void{pics=xml.image[picNum].picURL;total=xml.*.length();W=xml.image[picNum].picW;H=xml.image[picNum].picH;loader=new Loader;loader.load(new URLRequest(pics));addChild(loader);loader.x = (stage.stageWidth-Number(W)) /2;loader.y = (stage.stageHeight-Number(H)) /2;}function timerListener(event:TimerEvent):void{	if(picNum == 0){		loadPics();	}else if(picNum < total){		loader.unload();		loadPics();	}else{		loader.unload();		picNum = 0;		loadPics();	}}function timerListener2(event:TimerEvent):void{	if(picNum == 0){		loadPics();	} else if(picNum > 0){		loadPics();	}else{		loader.unload();		picNum = total-1;	}}function nextPic(event:MouseEvent):void{	timer.addEventListener(TimerEvent.TIMER, timerListener);	picNum++;}function prevPic(event:MouseEvent):void{	timer.addEventListener(TimerEvent.TIMER, timerListener2);	picNum--;}xmlLoader.addEventListener(Event.COMPLETE, processXML);next_btn.addEventListener(MouseEvent.CLICK, nextPic);prev_btn.addEventListener(MouseEvent.CLICK, prevPic);